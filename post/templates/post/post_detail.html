<!-- individual post page to be created here-->
{% extends "base.html" %}

{% block title %}{{ image.title }}{% endblock %}

{% block content %}
<div class="container site-margin post-detail">
    {% if request.user.is_authenticated %}
    <div>
      <a href="{% url 'posts:post_delete' post.id %}">Delete</a>
    </div> 
    {% endif %}   
    <div class="row post">
    {{ post.user }}
    <img src="{{ post.image.url }}">
    <div>
        {{ post.caption }}
    </div>
        {{ post.created_date|date:"d M Y" }}
    </div>
    <div>
      {% if liked_by_user %}
      Liked
      <a href="{% url 'posts:like' post.id %}">
        <p>Likes: {{ post.likes }}</p>
        {% if post.likes == 0 %}
        <p>No likes</p>
        {% elif post.likes == 1 %}
        <p>Liked by {{post.likes}} person</p>
        {% else %}
        <p>Liked by {{ post.likes }} people</p>
        {% endif %}
      {% else %}
      Not liked
      <a href="{% url 'posts:like' post.id %}">
        <p>Likes: {{ post.likes }}</p>
        {% if post.likes == 0 %}
        <p>No likes</p>
        {% elif post.likes == 1 %}
        <p>Liked by {{post.likes}} person</p>
        {% else %}
        <p>Liked by {{ post.likes }} people</p>
        {% endif %}
      {% endif %}
      </a>
      <div>
        {% with comments.count as total_comments %}
        <h2>
          {{ total_comments }} comment{{ total_comments|pluralize }}
        </h2>
        {% endwith %}
        {% for comment in comments %}
          <p>
            {{ comment.user }}
          </p>
          <p>
            {{ comment.created }}
          </p>
          {{ comment.comment_body|linebreaks }}
          {% if request.user == comment.user %}
          <a href="{% url 'posts:comment_delete' comment.id %}">Delete comment</a>
          {% endif %}
      </div>
        <hr>
        {% empty %}
        <p>There are no comment</p>
      {% endfor %}
      </div>
    </div>
    <div>
      {% include "post/comment_form.html" %}
    </div>
</div>

{% endblock %}